---
layout: olb
title: Bill Pay
nav_active: billpay
---

<section class="py-8">
    <div class="container mx-auto px-4 max-w-6xl">
        <!-- Page Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Bill Pay</h1>
            <p class="text-gray-600">Pay your bills quickly and securely from your AI First accounts</p>
        </div>

        <!-- Quick Actions -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <button id="pay-new-bill-btn" class="bg-blue-600 text-white p-6 rounded-lg hover:bg-blue-700 transition duration-300 text-center">
                <img src="/assets/images/pay-bill-icon.png" alt="Pay Bill" class="w-12 h-12 mx-auto mb-3">
                <h3 class="font-semibold text-lg">Pay a Bill</h3>
                <p class="text-sm opacity-90">Make a one-time payment</p>
            </button>
            <button id="add-payee-btn" class="bg-gray-100 text-gray-700 p-6 rounded-lg hover:bg-gray-200 transition duration-300 text-center">
                <img src="/assets/images/add-payee-icon.png" alt="Add Payee" class="w-12 h-12 mx-auto mb-3">
                <h3 class="font-semibold text-lg">Add New Payee</h3>
                <p class="text-sm">Set up a new bill recipient</p>
            </button>
            <button class="bg-gray-100 text-gray-700 p-6 rounded-lg hover:bg-gray-200 transition duration-300 text-center">
                <img src="/assets/images/autopay-icon.png" alt="AutoPay" class="w-12 h-12 mx-auto mb-3">
                <h3 class="font-semibold text-lg">AutoPay Setup</h3>
                <p class="text-sm">Schedule recurring payments</p>
            </button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Saved Payees -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h2 class="text-xl font-bold text-gray-900">Saved Payees</h2>
                        <button id="manage-payees-btn" class="text-blue-600 hover:text-blue-700 font-medium text-sm">Manage</button>
                    </div>
                </div>
                <div class="p-6">
                    <div id="payees-list" class="space-y-4">
                        <!-- Payees will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Recent Payments -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h2 class="text-xl font-bold text-gray-900">Recent Payments</h2>
                        <button class="text-blue-600 hover:text-blue-700 font-medium text-sm">View All</button>
                    </div>
                </div>
                <div class="p-6">
                    <div id="recent-payments" class="space-y-4">
                        <!-- Recent payments will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Scheduled Payments -->
        <div class="mt-8 bg-white rounded-lg shadow-md border border-gray-200">
            <div class="p-6 border-b border-gray-200">
                <h2 class="text-xl font-bold text-gray-900">Upcoming Scheduled Payments</h2>
            </div>
            <div class="p-6">
                <div id="scheduled-payments" class="space-y-4">
                    <!-- Scheduled payments will be loaded here -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Pay Bill Modal -->
<div id="pay-bill-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-bold text-gray-900">Pay a Bill</h3>
                    <button id="close-pay-modal" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form id="pay-bill-form" class="space-y-6">
                    <!-- Payee Selection -->
                    <div>
                        <label for="payee-select" class="block text-sm font-medium text-gray-700 mb-2">Select Payee *</label>
                        <select id="payee-select" name="payee" required class="w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Choose a payee</option>
                        </select>
                    </div>

                    <!-- Payment Account -->
                    <div>
                        <label for="payment-account" class="block text-sm font-medium text-gray-700 mb-2">Pay From Account *</label>
                        <select id="payment-account" name="payment-account" required class="w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Select account</option>
                        </select>
                        <div id="payment-account-balance" class="mt-2 text-sm text-gray-600"></div>
                    </div>

                    <!-- Amount -->
                    <div>
                        <label for="payment-amount" class="block text-sm font-medium text-gray-700 mb-2">Amount *</label>
                        <div class="relative">
                            <span class="absolute left-3 top-3 text-gray-500">$</span>
                            <input type="number" id="payment-amount" name="amount" step="0.01" min="0.01" required class="w-full pl-8 pr-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="0.00">
                        </div>
                    </div>

                    <!-- Payment Date -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Payment Date</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="radio" name="payment-date-type" value="today" checked class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-900">Pay today</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="payment-date-type" value="scheduled" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-900">Schedule for later</span>
                            </label>
                        </div>
                        <div id="payment-date-section" class="mt-3 hidden">
                            <input type="date" id="payment-date" name="payment-date" class="w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>

                    <!-- Account Number -->
                    <div>
                        <label for="account-number" class="block text-sm font-medium text-gray-700 mb-2">Account Number (Optional)</label>
                        <input type="text" id="account-number" name="account-number" class="w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Your account number with this payee">
                    </div>

                    <!-- Memo -->
                    <div>
                        <label for="payment-memo" class="block text-sm font-medium text-gray-700 mb-2">Memo (Optional)</label>
                        <input type="text" id="payment-memo" name="memo" class="w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Payment description">
                    </div>

                    <!-- Submit Buttons -->
                    <div class="flex space-x-4">
                        <button type="submit" class="flex-1 bg-blue-600 text-white py-3 px-6 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300 font-medium">
                            Submit Payment
                        </button>
                        <button type="button" id="cancel-payment" class="flex-1 bg-gray-100 text-gray-700 py-3 px-6 rounded-md hover:bg-gray-200 transition duration-300 font-medium">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Add Payee Modal -->
<div id="add-payee-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-bold text-gray-900">Add New Payee</h3>
                    <button id="close-payee-modal" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form id="add-payee-form" class="space-y-6">
                    <!-- Payee Name -->
                    <div>
                        <label for="payee-name" class="block text-sm font-medium text-gray-700 mb-2">Payee Name *</label>
                        <input type="text" id="payee-name" name="payee-name" required class="w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., Pacific Gas & Electric">
                    </div>

                    <!-- Payee Category -->
                    <div>
                        <label for="payee-category" class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                        <select id="payee-category" name="category" class="w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Select category</option>
                            <option value="utilities">Utilities</option>
                            <option value="credit-card">Credit Card</option>
                            <option value="mortgage">Mortgage/Rent</option>
                            <option value="insurance">Insurance</option>
                            <option value="phone">Phone/Internet</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <!-- Address -->
                    <div>
                        <label for="payee-address" class="block text-sm font-medium text-gray-700 mb-2">Mailing Address *</label>
                        <textarea id="payee-address" name="address" required rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="123 Main St&#10;City, State 12345"></textarea>
                    </div>

                    <!-- Phone -->
                    <div>
                        <label for="payee-phone" class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                        <input type="tel" id="payee-phone" name="phone" class="w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="(555) 123-4567">
                    </div>

                    <!-- Account Number -->
                    <div>
                        <label for="payee-account-number" class="block text-sm font-medium text-gray-700 mb-2">Your Account Number with Payee</label>
                        <input type="text" id="payee-account-number" name="account-number" class="w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Your account number">
                    </div>

                    <!-- Submit Buttons -->
                    <div class="flex space-x-4">
                        <button type="submit" class="flex-1 bg-blue-600 text-white py-3 px-6 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300 font-medium">
                            Add Payee
                        </button>
                        <button type="button" id="cancel-payee" class="flex-1 bg-gray-100 text-gray-700 py-3 px-6 rounded-md hover:bg-gray-200 transition duration-300 font-medium">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
let accounts = [];
let payees = [
    {
        id: 'payee1',
        name: 'Pacific Gas & Electric',
        category: 'utilities',
        address: '77 Beale St\nSan Francisco, CA 94105',
        phone: '(800) 743-5000',
        accountNumber: '1234567890'
    },
    {
        id: 'payee2',
        name: 'Chase Credit Card',
        category: 'credit-card',
        address: 'PO Box 15298\nWilmington, DE 19850',
        phone: '(800) 432-3117',
        accountNumber: '4532-1234-5678-9012'
    },
    {
        id: 'payee3',
        name: 'State Farm Insurance',
        category: 'insurance',
        address: 'One State Farm Plaza\nBloomington, IL 61710',
        phone: '(800) 782-8332',
        accountNumber: 'SF-987654321'
    }
];

let recentPayments = [
    {
        id: 'payment1',
        payee: 'Pacific Gas & Electric',
        amount: 127.45,
        date: '2024-12-28',
        status: 'completed',
        account: 'AI First Checking'
    },
    {
        id: 'payment2',
        payee: 'Chase Credit Card',
        amount: 250.00,
        date: '2024-12-25',
        status: 'completed',
        account: 'AI First Checking'
    },
    {
        id: 'payment3',
        payee: 'State Farm Insurance',
        amount: 89.50,
        date: '2024-12-20',
        status: 'completed',
        account: 'AI First Checking'
    }
];

let scheduledPayments = [
    {
        id: 'scheduled1',
        payee: 'Pacific Gas & Electric',
        amount: 135.00,
        date: '2025-01-15',
        frequency: 'monthly',
        account: 'AI First Checking'
    },
    {
        id: 'scheduled2',
        payee: 'Chase Credit Card',
        amount: 75.00,
        date: '2025-01-20',
        frequency: 'monthly',
        account: 'AI First Checking'
    }
];

// Load accounts
async function loadAccounts() {
    try {
        const response = await fetch('/assets/json/accounts.json');
        const data = await response.json();
        accounts = data.accounts.filter(account => account.type === 'checking' || account.type === 'savings');
        populateAccountSelects();
    } catch (error) {
        console.error('Error loading accounts:', error);
    }
}

// Populate account selects
function populateAccountSelects() {
    const paymentAccountSelect = document.getElementById('payment-account');
    
    paymentAccountSelect.innerHTML = '<option value="">Select account</option>';
    
    accounts.forEach(account => {
        const option = `<option value="${account.id}">${account.name} - $${account.balance.toLocaleString('en-US', {minimumFractionDigits: 2})}</option>`;
        paymentAccountSelect.innerHTML += option;
    });
}

// Display payees
function displayPayees() {
    const container = document.getElementById('payees-list');
    
    if (payees.length === 0) {
        container.innerHTML = '<p class="text-gray-500 text-center py-4">No saved payees. Add a payee to get started.</p>';
        return;
    }
    
    container.innerHTML = payees.map(payee => `
        <div class="flex justify-between items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
            <div class="flex-1">
                <h4 class="font-semibold text-gray-900">${payee.name}</h4>
                <p class="text-sm text-gray-600 capitalize">${payee.category.replace('-', ' ')}</p>
                ${payee.accountNumber ? `<p class="text-xs text-gray-500">Account: ${payee.accountNumber}</p>` : ''}
            </div>
            <div class="flex space-x-2">
                <button onclick="payBill('${payee.id}')" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition duration-300 text-sm font-medium">
                    Pay Bill
                </button>
                <button class="text-gray-400 hover:text-gray-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path>
                    </svg>
                </button>
            </div>
        </div>
    `).join('');
}

// Display recent payments
function displayRecentPayments() {
    const container = document.getElementById('recent-payments');
    
    if (recentPayments.length === 0) {
        container.innerHTML = '<p class="text-gray-500 text-center py-4">No recent payments.</p>';
        return;
    }
    
    container.innerHTML = recentPayments.map(payment => `
        <div class="flex justify-between items-center py-3 border-b border-gray-100 last:border-b-0">
            <div class="flex-1">
                <p class="font-medium text-gray-900">${payment.payee}</p>
                <p class="text-sm text-gray-600">${new Date(payment.date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                })}</p>
                <p class="text-xs text-gray-500">${payment.account}</p>
            </div>
            <div class="text-right">
                <p class="font-semibold text-gray-900">$${payment.amount.toLocaleString('en-US', {minimumFractionDigits: 2})}</p>
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${payment.status === 'completed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                    ${payment.status}
                </span>
            </div>
        </div>
    `).join('');
}

// Display scheduled payments
function displayScheduledPayments() {
    const container = document.getElementById('scheduled-payments');
    
    if (scheduledPayments.length === 0) {
        container.innerHTML = '<p class="text-gray-500 text-center py-4">No scheduled payments.</p>';
        return;
    }
    
    container.innerHTML = scheduledPayments.map(payment => `
        <div class="flex justify-between items-center p-4 border border-gray-200 rounded-lg">
            <div class="flex-1">
                <p class="font-medium text-gray-900">${payment.payee}</p>
                <p class="text-sm text-gray-600">Next payment: ${new Date(payment.date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                })}</p>
                <p class="text-xs text-gray-500">${payment.account} â€¢ ${payment.frequency}</p>
            </div>
            <div class="text-right">
                <p class="font-semibold text-gray-900">$${payment.amount.toLocaleString('en-US', {minimumFractionDigits: 2})}</p>
                <div class="flex space-x-2 mt-2">
                    <button class="text-blue-600 hover:text-blue-700 text-sm font-medium">Edit</button>
                    <button class="text-red-600 hover:text-red-700 text-sm font-medium">Cancel</button>
                </div>
            </div>
        </div>
    `).join('');
}

// Populate payee select
function populatePayeeSelect() {
    const payeeSelect = document.getElementById('payee-select');
    
    payeeSelect.innerHTML = '<option value="">Choose a payee</option>';
    
    payees.forEach(payee => {
        const option = `<option value="${payee.id}">${payee.name}</option>`;
        payeeSelect.innerHTML += option;
    });
}

// Pay bill function
function payBill(payeeId) {
    const payee = payees.find(p => p.id === payeeId);
    if (payee) {
        document.getElementById('payee-select').value = payeeId;
        if (payee.accountNumber) {
            document.getElementById('account-number').value = payee.accountNumber;
        }
        showPayBillModal();
    }
}

// Show pay bill modal
function showPayBillModal() {
    populatePayeeSelect();
    document.getElementById('pay-bill-modal').classList.remove('hidden');
}

// Show add payee modal
function showAddPayeeModal() {
    document.getElementById('add-payee-modal').classList.remove('hidden');
}

// Close modals
function closePayBillModal() {
    document.getElementById('pay-bill-modal').classList.add('hidden');
    document.getElementById('pay-bill-form').reset();
}

function closeAddPayeeModal() {
    document.getElementById('add-payee-modal').classList.add('hidden');
    document.getElementById('add-payee-form').reset();
}

// Update payment account balance
function updatePaymentAccountBalance() {
    const accountId = document.getElementById('payment-account').value;
    const balanceDiv = document.getElementById('payment-account-balance');
    
    if (accountId) {
        const account = accounts.find(acc => acc.id === accountId);
        if (account) {
            balanceDiv.textContent = `Available balance: $${account.balance.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            balanceDiv.classList.remove('hidden');
        }
    } else {
        balanceDiv.textContent = '';
        balanceDiv.classList.add('hidden');
    }
}

// Toggle payment date section
function togglePaymentDate() {
    const dateType = document.querySelector('input[name="payment-date-type"]:checked').value;
    const dateSection = document.getElementById('payment-date-section');
    
    if (dateType === 'scheduled') {
        dateSection.classList.remove('hidden');
        // Set minimum date to tomorrow
        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);
        document.getElementById('payment-date').min = tomorrow.toISOString().split('T')[0];
    } else {
        dateSection.classList.add('hidden');
        document.getElementById('payment-date').value = '';
    }
}

// Handle pay bill form submission
function handlePayBillSubmit(e) {
    e.preventDefault();
    
    const payeeId = document.getElementById('payee-select').value;
    const accountId = document.getElementById('payment-account').value;
    const amount = parseFloat(document.getElementById('payment-amount').value);
    
    if (!payeeId || !accountId || !amount) {
        alert('Please fill in all required fields.');
        return;
    }
    
    // Check sufficient funds
    const account = accounts.find(acc => acc.id === accountId);
    if (amount > account.balance) {
        alert('Insufficient funds in the selected account.');
        return;
    }
    
    // Show confirmation
    const payee = payees.find(p => p.id === payeeId);
    if (confirm(`Are you sure you want to pay $${amount.toFixed(2)} to ${payee.name}?`)) {
        alert('Payment submitted successfully! You will receive a confirmation email shortly.');
        closePayBillModal();
        
        // Add to recent payments (in a real app, this would be handled by the backend)
        recentPayments.unshift({
            id: 'payment' + Date.now(),
            payee: payee.name,
            amount: amount,
            date: new Date().toISOString().split('T')[0],
            status: 'completed',
            account: account.name
        });
        displayRecentPayments();
    }
}

// Handle add payee form submission
function handleAddPayeeSubmit(e) {
    e.preventDefault();
    
    const name = document.getElementById('payee-name').value;
    const category = document.getElementById('payee-category').value;
    const address = document.getElementById('payee-address').value;
    const phone = document.getElementById('payee-phone').value;
    const accountNumber = document.getElementById('payee-account-number').value;
    
    if (!name || !address) {
        alert('Please fill in all required fields.');
        return;
    }
    
    // Add new payee
    const newPayee = {
        id: 'payee' + Date.now(),
        name: name,
        category: category || 'other',
        address: address,
        phone: phone,
        accountNumber: accountNumber
    };
    
    payees.push(newPayee);
    displayPayees();
    closeAddPayeeModal();
    
    alert('Payee added successfully!');
}

// Event listeners
document.addEventListener('DOMContentLoaded', function() {
    loadAccounts();
    displayPayees();
    displayRecentPayments();
    displayScheduledPayments();
    
    // Button event listeners
    document.getElementById('pay-new-bill-btn').addEventListener('click', showPayBillModal);
    document.getElementById('add-payee-btn').addEventListener('click', showAddPayeeModal);
    
    // Modal close buttons
    document.getElementById('close-pay-modal').addEventListener('click', closePayBillModal);
    document.getElementById('close-payee-modal').addEventListener('click', closeAddPayeeModal);
    document.getElementById('cancel-payment').addEventListener('click', closePayBillModal);
    document.getElementById('cancel-payee').addEventListener('click', closeAddPayeeModal);
    
    // Close modals when clicking outside
    document.getElementById('pay-bill-modal').addEventListener('click', function(e) {
        if (e.target === this) closePayBillModal();
    });
    document.getElementById('add-payee-modal').addEventListener('click', function(e) {
        if (e.target === this) closeAddPayeeModal();
    });
    
    // Form event listeners
    document.getElementById('payment-account').addEventListener('change', updatePaymentAccountBalance);
    document.querySelectorAll('input[name="payment-date-type"]').forEach(radio => {
        radio.addEventListener('change', togglePaymentDate);
    });
    
    // Form submissions
    document.getElementById('pay-bill-form').addEventListener('submit', handlePayBillSubmit);
    document.getElementById('add-payee-form').addEventListener('submit', handleAddPayeeSubmit);
});
</script>