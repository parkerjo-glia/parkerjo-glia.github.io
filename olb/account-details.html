---
layout: olb
title: Account Details
---

<section class="py-8">
    <div class="container mx-auto px-4">
        <!-- Back Navigation -->
        <div class="mb-6">
            <a href="/olb/dashboard.html" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-medium">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
                Back to Dashboard
            </a>
        </div>

        <!-- Account Header -->
        <div id="account-header" class="bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6">
            <!-- Account details will be loaded here -->
        </div>

        <!-- Account Actions -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
            <button id="show-account-btn" class="bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition duration-300 font-medium">
                Show Account Number
            </button>
            <button class="bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition duration-300 font-medium">
                Download Statements
            </button>
            <button id="transfer-btn" class="bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition duration-300 font-medium">
                Transfer Money
            </button>
            <button class="bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition duration-300 font-medium">
                Account Settings
            </button>
        </div>

        <!-- Transaction History -->
        <div class="bg-white rounded-lg shadow-md border border-gray-200">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h2 class="text-xl font-bold text-gray-900">Transaction History</h2>
                    <div class="flex space-x-2">
                        <select id="filter-period" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="30">Last 30 days</option>
                            <option value="90">Last 90 days</option>
                            <option value="180">Last 6 months</option>
                            <option value="365">Last year</option>
                        </select>
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition duration-300 text-sm font-medium">
                            Export
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="p-6">
                <div id="transactions-container">
                    <!-- Transactions will be loaded here -->
                </div>
                
                <!-- Pagination -->
                <div class="mt-6 flex justify-between items-center">
                    <p class="text-sm text-gray-600">Showing <span id="showing-count">0</span> transactions</p>
                    <div class="flex space-x-2">
                        <button id="prev-btn" class="px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                            Previous
                        </button>
                        <button id="next-btn" class="px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                            Next
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Account Number Modal -->
<div id="account-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-gray-900">Account Information</h3>
                <button id="close-modal" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="modal-content">
                <!-- Account details will be populated here -->
            </div>
            <div class="mt-6 flex justify-end">
                <button id="close-modal-btn" class="bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition duration-300">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

<script>
let currentAccount = null;
let allTransactions = [];
let currentPage = 1;
const transactionsPerPage = 10;

// Get account ID from URL parameters
function getAccountId() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('id');
}

// Load account details
async function loadAccountDetails() {
    const accountId = getAccountId();
    if (!accountId) {
        window.location.href = '/olb/dashboard.html';
        return;
    }

    try {
        const response = await fetch('/assets/json/accounts.json');
        const data = await response.json();
        currentAccount = data.accounts.find(account => account.id === accountId);
        
        if (!currentAccount) {
            window.location.href = '/olb/dashboard.html';
            return;
        }
        
        displayAccountHeader(currentAccount);
        loadTransactions(accountId);
    } catch (error) {
        console.error('Error loading account details:', error);
    }
}

// Display account header
function displayAccountHeader(account) {
    const container = document.getElementById('account-header');
    const isLoan = account.balance < 0;
    const balanceColor = isLoan ? 'text-red-600' : 'text-green-600';
    const balanceLabel = isLoan ? 'Balance Owed' : 'Available Balance';
    
    container.innerHTML = `
        <div class="flex justify-between items-start">
            <div>
                <h1 class="text-2xl font-bold text-gray-900 mb-2">${account.name}</h1>
                <p class="text-gray-600 capitalize mb-1">${account.type.replace('_', ' ')}</p>
                <p class="text-sm text-gray-500">Account ${account.accountNumber}</p>
                <p class="text-sm text-gray-500">Opened: ${new Date(account.openDate).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                })}</p>
            </div>
            <div class="text-right">
                <p class="text-sm text-gray-600 mb-1">${balanceLabel}</p>
                <p class="text-3xl font-bold ${balanceColor}">$${Math.abs(account.balance).toLocaleString('en-US', {minimumFractionDigits: 2})}</p>
                ${account.type === 'heloc' ? `
                    <p class="text-sm text-gray-600 mt-2">Available Credit</p>
                    <p class="text-lg font-semibold text-blue-600">$${account.availableCredit.toLocaleString('en-US', {minimumFractionDigits: 2})}</p>
                ` : ''}
                ${account.interestRate ? `
                    <p class="text-sm text-gray-600 mt-2">Interest Rate: <span class="font-medium">${account.interestRate}% APY</span></p>
                ` : ''}
                ${account.monthlyPayment ? `
                    <p class="text-sm text-gray-600 mt-2">Monthly Payment: <span class="font-medium">$${account.monthlyPayment.toLocaleString('en-US', {minimumFractionDigits: 2})}</span></p>
                ` : ''}
            </div>
        </div>
    `;
}

// Load transactions for account
async function loadTransactions(accountId) {
    try {
        const response = await fetch('/assets/json/transactions.json');
        const data = await response.json();
        allTransactions = data.transactions[accountId] || [];
        displayTransactions();
    } catch (error) {
        console.error('Error loading transactions:', error);
    }
}

// Display transactions
function displayTransactions() {
    const container = document.getElementById('transactions-container');
    const startIndex = (currentPage - 1) * transactionsPerPage;
    const endIndex = startIndex + transactionsPerPage;
    const pageTransactions = allTransactions.slice(startIndex, endIndex);
    
    if (pageTransactions.length === 0) {
        container.innerHTML = `
            <div class="text-center py-8">
                <p class="text-gray-500">No transactions found for this account.</p>
            </div>
        `;
        return;
    }
    
    container.innerHTML = `
        <div class="space-y-4">
            ${pageTransactions.map(transaction => `
                <div class="flex justify-between items-center py-4 border-b border-gray-100 last:border-b-0">
                    <div class="flex-1">
                        <p class="font-medium text-gray-900">${transaction.description}</p>
                        <p class="text-sm text-gray-600">${new Date(transaction.date).toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'short',
                            day: 'numeric'
                        })}</p>
                        <p class="text-xs text-gray-500">${transaction.category}</p>
                    </div>
                    <div class="text-right">
                        <p class="font-semibold ${transaction.amount >= 0 ? 'text-green-600' : 'text-red-600'}">
                            ${transaction.amount >= 0 ? '+' : ''}$${Math.abs(transaction.amount).toLocaleString('en-US', {minimumFractionDigits: 2})}
                        </p>
                        <p class="text-xs text-gray-500">Balance: $${Math.abs(transaction.balance).toLocaleString('en-US', {minimumFractionDigits: 2})}</p>
                    </div>
                </div>
            `).join('')}
        </div>
    `;
    
    // Update pagination
    document.getElementById('showing-count').textContent = allTransactions.length;
    document.getElementById('prev-btn').disabled = currentPage === 1;
    document.getElementById('next-btn').disabled = endIndex >= allTransactions.length;
}

// Show account number modal
function showAccountModal() {
    if (!currentAccount) return;
    
    const modal = document.getElementById('account-modal');
    const content = document.getElementById('modal-content');
    
    content.innerHTML = `
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Account Number</label>
                <p class="text-lg font-mono bg-gray-50 p-3 rounded border">${currentAccount.fullAccountNumber}</p>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Routing Number</label>
                <p class="text-lg font-mono bg-gray-50 p-3 rounded border">${currentAccount.routingNumber}</p>
            </div>
            <div class="bg-yellow-50 border border-yellow-200 rounded-md p-4">
                <div class="flex">
                    <svg class="w-5 h-5 text-yellow-400 mr-2 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                    </svg>
                    <div>
                        <h4 class="text-sm font-medium text-yellow-800">Keep this information secure</h4>
                        <p class="text-sm text-yellow-700 mt-1">Never share your account details with anyone you don't trust.</p>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    modal.classList.remove('hidden');
}

// Close modal
function closeModal() {
    document.getElementById('account-modal').classList.add('hidden');
}

// Event listeners
document.addEventListener('DOMContentLoaded', function() {
    loadAccountDetails();
    
    // Show account number button
    document.getElementById('show-account-btn').addEventListener('click', showAccountModal);
    
    // Transfer button
    document.getElementById('transfer-btn').addEventListener('click', function() {
        if (currentAccount && currentAccount.balance >= 0) {
            window.location.href = `/olb/transfer.html?from=${currentAccount.id}`;
        }
    });
    
    // Modal close buttons
    document.getElementById('close-modal').addEventListener('click', closeModal);
    document.getElementById('close-modal-btn').addEventListener('click', closeModal);
    
    // Close modal when clicking outside
    document.getElementById('account-modal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeModal();
        }
    });
    
    // Pagination buttons
    document.getElementById('prev-btn').addEventListener('click', function() {
        if (currentPage > 1) {
            currentPage--;
            displayTransactions();
        }
    });
    
    document.getElementById('next-btn').addEventListener('click', function() {
        const maxPages = Math.ceil(allTransactions.length / transactionsPerPage);
        if (currentPage < maxPages) {
            currentPage++;
            displayTransactions();
        }
    });
});
</script>